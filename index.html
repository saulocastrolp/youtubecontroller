<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Music Connect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
    <script>
          let API_URL = "https://youtubecontroller.vercel.app/api";

async function sendCommand(endpoint) {
    await fetch(`${API_URL}/${endpoint}`, { method: "POST" });
}

async function authenticate() {
    window.location.href = `${API_URL}/login`;
}

async function getStatus() {
    const response = await fetch(`${API_URL}/status`);
    const data = await response.json();
    document.getElementById("video-title").innerText = data.title || "Nenhum vídeo/música tocando";
}

setInterval(getStatus, 5000);
    </script>
</head>
<body>
    <div class="container">
        <h1> YouTube Music Connect </h1>
        <br/>
        <button class="btn btn-dark" onclick="authenticate()">🔑 Login</button>
        <br/>
        <h2 id="music-title">Nenhuma música tocando...</h2>
        <h3 id="artist-name"></h3>
    
        <div class="btn-group">
            <button class="btn btn-dark" onclick="sync()">🔄 Sincronizar</button>
            <button class="btn btn-dark" onclick="transferPlayback()">📲 Transferir Reprodução</button>
        </div>
        <hr/>
        <div class="btn-group">
            <button class="btn btn-dark" onclick="sendCommand('play')">▶️ Play</button>
            <button class="btn btn-dark" onclick="sendCommand('pause')">⏸️ Pause</button>
            <button class="btn btn-dark" onclick="sendCommand('previous')">⏮️ Anterior</button>
            <button class="btn btn-dark" onclick="sendCommand('next')">⏭️ Próxima</button>
        </div>
        <hr/>
        <div class="btn-group">
            <button class="btn btn-dark" onclick="sendCommand('like')">❤️ Curtir</button>
            <button class="btn btn-dark" onclick="sendCommand('dislike')">👎 Não Curtir</button>
            <button class="btn btn-dark" onclick="sendCommand('shuffle')">🔀 Aleatório</button>
            <button class="btn btn-dark" onclick="sendCommand('repeat')">🔁 Repetir</button>
        </div>
        
    
        <!--br><br>
        <div class="btn-group">
            <button class="btn btn-dark" onclick="syncMusic()">🔄 Sincronizar Música</button>
            <button class="btn btn-dark" onclick="playOnDevice()">📲 Tocar no Celular/PC</button>
        </div-->
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>
